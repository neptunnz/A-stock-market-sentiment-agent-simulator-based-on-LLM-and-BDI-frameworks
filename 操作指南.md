# 股票市场情绪智能体模拟器 - 操作指南

## 📋 系统概述

本模拟器包含**5个智能体**：
- **乐观投资者A、B**（2个）：倾向于看到积极面，风险承受度高
- **悲观投资者A、B**（2个）：倾向于看到风险，风险承受度低  
- **冷静投资者A**（1个）：基于数据分析做决策

## 🚀 快速开始

### 第一步：启动模拟

1. **单步模拟**（推荐开始使用）
   - 点击侧边栏的 **"▶️ 执行一步"** 按钮
   - 系统会：
     - 生成一条随机新闻（正面/负面/中性）
     - 让所有智能体接收新闻并更新信念
     - 智能体基于LLM决策形成投资意图
     - 执行交易并更新股价
   - 每次点击执行一个时间步

2. **自动运行**
   - 勾选侧边栏的 **"🔄 自动运行"** 复选框
   - 系统会每秒自动执行一步，持续模拟
   - 再次取消勾选可停止自动运行

### 第二步：观察结果

执行模拟后，界面会显示：

#### 📰 最新新闻卡片
- 显示当前时间步的新闻内容
- 标注新闻情绪（正面/负面/中性）
- 用颜色区分情绪类型

#### 📊 侧边栏状态面板
实时显示：
- **当前股价**：当前股票价格
- **涨跌幅**：相对于初始价格的涨跌百分比
- **总交易数**：累计交易次数
- **时间步**：已执行的模拟步数

### 第三步：查看详细分析

使用顶部的单选按钮切换不同视图：

#### 📈 价格与情绪
- **股价走势图**：显示股价随时间的变化
- **市场情绪指数**：显示乐观、悲观、冷静三种情绪的平均分数
- **关键指标**：
  - 当前价格 vs 初始价格
  - 市场情绪（乐观/悲观/中性）
  - 波动率

**观察要点**：
- 正面新闻是否推高股价？
- 情绪如何影响价格变化？
- 是否存在情绪传染现象？

#### 💹 交易分析
- **交易类型分布**：买入 vs 卖出的饼图
- **各类型智能体交易量**：不同性格投资者的交易行为对比
- **交易量时间序列**：总交易量和净买入量随时间变化
- **交易明细表**：每次交易的详细信息

**观察要点**：
- 乐观投资者是否更倾向于买入？
- 悲观投资者是否更倾向于卖出？
- 是否存在羊群效应（跟随交易）？

#### 👥 智能体状态
- **智能体状态表**：显示每个智能体的：
  - 现金余额
  - 持股数量
  - 投资组合总价值
  - 情绪分数
  - 市场展望
- **投资组合价值对比**：各智能体的资产对比
- **情绪分数对比**：各智能体的情绪差异
- **智能体观点**：每个智能体对最新新闻的看法

**观察要点**：
- 哪种类型的投资者表现更好？
- 情绪如何影响投资决策？
- 智能体的观点是否反映了其性格特征？

#### 📊 市场统计
- **关键指标**：当前价格、价格变化、最高价、最低价
- **价格分布直方图**：价格的历史分布
- **收益率分析**：
  - 收益率时间序列
  - 平均收益率
  - 收益率波动率
  - 最大单日涨幅/跌幅

**观察要点**：
- 市场是否出现波动聚集？
- 收益率分布是否符合金融市场的特征？
- 是否存在异常波动？

## 🔬 实验建议

### 实验1：观察情绪对价格的影响
1. 连续点击"执行一步"10-20次
2. 观察正面新闻出现时：
   - 乐观投资者的反应
   - 股价是否上涨
   - 情绪指数如何变化
3. 观察负面新闻出现时：
   - 悲观投资者的反应
   - 股价是否下跌
   - 是否存在过度反应

### 实验2：研究羊群效应
1. 执行多步模拟
2. 切换到"交易分析"视图
3. 观察：
   - 当某个智能体大量买入时，其他智能体是否跟随？
   - 交易量是否在特定时间点集中？
   - 是否存在"跟风"交易模式？

### 实验3：对比不同投资策略
1. 执行30-50步模拟
2. 切换到"智能体状态"视图
3. 对比：
   - 乐观投资者 vs 悲观投资者的投资组合价值
   - 哪种策略在模拟期间表现更好？
   - 冷静投资者的表现如何？

### 实验4：观察市场波动
1. 执行50+步模拟
2. 切换到"市场统计"视图
3. 分析：
   - 价格分布是否合理？
   - 是否存在波动聚集现象？
   - 收益率是否符合正态分布？

## 💡 操作技巧

1. **重置模拟**：点击"🔄 重置模拟"按钮可以重新开始
2. **逐步观察**：使用单步模式可以仔细观察每一步的变化
3. **快速模拟**：使用自动运行模式可以快速积累数据
4. **对比分析**：在不同视图间切换，从多个角度理解市场行为

## 🎯 关键概念理解

- **情绪传染**：观察一个智能体的情绪如何影响其他智能体
- **自证预言**：乐观预期是否真的推高价格？
- **羊群效应**：智能体是否会跟随其他智能体的交易行为？
- **过度反应**：市场是否对新闻反应过度？
- **价格偏离**：价格是否偏离基础价值？

## ⚠️ 注意事项

1. **LLM响应时间**：如果使用真实API，每次决策可能需要几秒钟
2. **模拟响应模式**：如果API不可用，系统会使用模拟响应（功能正常）
3. **数据持久化**：刷新页面会重置模拟，如需保存数据请截图
4. **参数调整**：可以在`config.py`中调整初始价格、智能体数量等参数

## 🔄 典型操作流程

```
1. 打开应用 → 看到初始界面
2. 点击"执行一步" → 看到第一条新闻和第一次交易
3. 连续点击5-10次 → 积累初始数据
4. 切换到"价格与情绪" → 观察价格走势
5. 切换到"交易分析" → 分析交易模式
6. 切换到"智能体状态" → 查看各智能体表现
7. 继续执行更多步 → 积累更多数据
8. 切换到"市场统计" → 进行统计分析
9. 重置模拟 → 尝试不同的参数或观察不同的结果
```

祝您实验顺利！🎉

